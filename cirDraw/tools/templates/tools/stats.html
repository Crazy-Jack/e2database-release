{% extends "base.html" %}

{% load static %}

{% block content %}

<div id="search-container" class="container" style="padding-top: 55px; padding-right: 10em;">
  
  
  <!-- <span class="demo" title="hello" data-tipso="I'm a tooltip">Hover me</span> -->
<div id="myfilterbox" class="listbox-area">
  <div>
    
    <div id="ss_elem" class="listbox-label"><b>Select Criterion:</b></div>
    <div style="display:flex;">
      <div style="padding-left: 4em;"></div>
      <div>
        <span>Cell Line:</span>
        <ul class="ss_elem_list" id="ss_elem_list1" tabindex="0" role="listbox" aria-labelledby="ss_elem"> 
          <li id="ss_elem_MCF7" role="option">MCF7</li>
          <li id="ss_elem_MM231" role="option">MM231</li>
          <li id="ss_elem_SKBR3" role="option">SKBR3</li>
          <li id="ss_elem_T47D" role="option">T47D</li>
          <li id="ss_elem_BT474" role="option">BT474</li>
          <li id="ss_elem_SUM52PE" role="option">SUM52PE</li>
          <li id="ss_elem_ZR75" role="option">ZR75-1</li>
          <li id="ss_elem_MM134" role="option">MM134</li>
          <li id="ss_elem_SUM44" role="option">SUM44</li>
          <li id="ss_elem_BT20" role="option">BT20</li>
          <li id="ss_elem_BT483" role="option">BT483</li>
          <li id="ss_elem_CAMA1" role="option">CAMA1</li>
          <li id="ss_elem_HCC1428" role="option">HCC1428</li>
          <li id="ss_elem_MM157" role="option">MM157</li>
          <li id="ss_elem_MM175" role="option">MM175</li>
          <li id="ss_elem_MM361" role="option">MM361</li>
          <li id="ss_elem_MM415" role="option">MM415</li>
        </ul>
      </div>
      <div style="font-size:30px; padding:15px; border-right: 1px dashed black;height: 200px;">&nbsp;</div>
      <div style="font-size:30px; padding:15px; ">&nbsp;</div>
      <div>
        <span>Duration:</span>
        <ul class="ss_elem_list" id="ss_elem_list2" tabindex="0" role="listbox" aria-labelledby="ss_elem"> 
          <li id="ss_elem_2_1" role="option">1 hour</li>
          <li id="ss_elem_2_2" role="option">2 hour</li>
          <li id="ss_elem_2_3" role="option">3 hour</li>
          <li id="ss_elem_2_4" role="option">4 hour</li>
          <li id="ss_elem_2_5" role="option">6 hour</li>
          <li id="ss_elem_2_6" role="option">8 hour</li>
          <li id="ss_elem_2_7" role="option">12 hour</li>
          <li id="ss_elem_2_8" role="option">16 hour</li>
          <li id="ss_elem_2_9" role="option">18 hour</li>
          <li id="ss_elem_2_10" role="option">24 hour</li>
          <li id="ss_elem_2_11" role="option">48 hour</li>
        </ul>
      </div>

      <div style="font-size:30px; padding:15px; border-right: 1px dashed black;height: 200px;">&nbsp;</div>
      <div style="font-size:30px; padding:15px; ">&nbsp;</div>
      <div>
        <span>Dose:</span>
        <ul class="ss_elem_list" id="ss_elem_list3" tabindex="0" role="listbox" aria-labelledby="ss_elem"> 
          <li id="ss_elem_3_1" role="option">1 nM</li>
          <li id="ss_elem_3_2" role="option">10 nM</li>
          <li id="ss_elem_3_3" role="option">1000 nM</li>
        </ul>
      </div>

     
      
    </div>
  </div>
</div>
    

</div>
</div>


<div style="border-top: 4em;" class="container">
  <div style="padding-top: 2em;"></div>
  <div>
    <h3>Gene List Query By User-defined Conditions</h3>
    <div>Query genes:</div>
    <div style="display: table-cell; width: 500px;">
      <form>
      <label for="fname3">1) Present in top </label>
      <input type="text" id="fname3" class="hint" name="fname3" value="5"   size="3em"
          onfocus="if (this.className=='hint') { this.className = ''; this.value = '5'; }"
          onblur="if (this.value == '') { this.className = 'hint'; this.value = '5'; }">
      
      <label>percent of</label>
      <select name="direction" id="fname4">
        <option value="up">Up</option>
        <option value="down">Down</option>
      </select>

      <label>regulation</label>
      <br>
      <label for="disply_percent">2) Consistent in</label>
      <input type="text" id="fname5" class="hint" name="disply_percent" value="20"   size="3em"
          onfocus="if (this.className=='hint') { this.className = ''; this.value = '20'; }"
          onblur="if (this.value == '') { this.className = 'hint'; this.value = '20'; }">
      <label>percent of DEG comparisons (146 total)</label>
      <br>
      <div style="display: flex;">
        <input type="submit" id="submit3" value="Search">
        <div id="processtip3" style="margin-left: 10px; margin-top: 7px;"></div>
      </div>
      </form>
      <div style="padding-top: 2em;"></div>
    </div>

    <div style="display: flex;" id="meta_results_id">
      <div class="container">
        <div id="myChart-meta-div">
          <canvas id="myChart-meta" width="500" height="350"></canvas> 
        </div>
     
      </div>

      <div class="container">
          <div id="myChart-meta-ind-div">
            <canvas id="myChart-meta-ind" width="500" height="350"></canvas> 
          </div>
        
        <div id="prevnextbutton" style="padding-left:220px">
          <button class="btn hidden" id="prev_btn">
            prev
          </button>

          <button class="btn hidden" id="next_btn">
            next
          </button>
        </div>
      </div>

    
    </div>

  </div>






  <!-- <div id="dashline"><hr style="border: 1px dashed black;" /></div>
  <div style="padding-top: 2em;"></div>
  <h3>Up-Regulation</h3>
  <div style="display: flex; width: 100%;">
    <form id="fileform" action="/search/">
      {% csrf_token %}

      <label for="fname1">Mininum Up Regulate Percetage: </label>
      <input type="text" id="fname1" class="hint" name="fname1" value="50"   size="3em"
          onfocus="if (this.className=='hint') { this.className = ''; this.value = '50'; }"
          onblur="if (this.value == '') { this.className = 'hint'; this.value = '50'; }">
      <div style="padding-left: 1em;"></div>
      <label for="fname1_1">Log Fold Change Cutoff: </label>
      <input type="text" id="fname1_1" class="hint" name="fname1_1" value="0.5"  size="3em"
          onfocus="if (this.className=='hint') { this.className = ''; this.value = '0.5'; }"
          onblur="if (this.value == '') { this.className = 'hint'; this.value = '0.5'; }">
      <div style="border-left: 1em;"></div>
      <label for="fname1_2">Adjusted P-Value Cutoff: </label>
      <input type="text" id="fname1_2" class="hint" name="fname1_2" value="0.1"   size="3em"
          onfocus="if (this.className=='hint') { this.className = ''; this.value = '0.1'; }"
          onblur="if (this.value == '') { this.className = 'hint'; this.value = '0.1'; }">
      <div style="border-left: 1em;"></div>
      <div style="display: flex;">
        <input type="submit" id="submit1" value="Search">
        <div id="processtip1" style="margin-left: 10px; margin-top: 7px;"></div>
      </div>
      
      <a id="refresher" href='/tools/'><i class="fas fa-redo-alt ml-1"></i></a> 
    </form>
    
  </div>
  <div style="padding: 1em;"></div>
  
  <div id="post_table_1" style="width: 50em;" class="hidden">
    <div id="num_genes_1" style="padding-bottom: 1em;"></div>
    <div class="stacked-chart-container js-stacked-chart-container-up-micro">
      <form class="controls">
          <label><input type="radio" name="mode" value="stacked" checked> Stacked</label>
          &nbsp;
          <label><input type="radio" name="mode" value="grouped"> Grouped</label>
      </form>
      <svg id="js-stacked-chart-up-micro" class="stacked-chart js-stacked-chart"></svg>
      <div id="js-tooltip-up-micro" class="tooltip js-tooltip">
          <div class="tooltip-wrapper">
              <table class="tooltip-table js-tooltip-table"></table>
          </div>
      </div>
    </div>
    <div style="padding-bottom: 2em;"></div>
    <table id="microarray_table_up_1">
    </table>

    <div id="num_genes_1_rna" style="padding-top: 3em;"></div>

    <div class="stacked-chart-container js-stacked-chart-container-up-rnaseq">
      <form class="controls">
          <label><input type="radio" name="mode" value="stacked" checked> Stacked</label>
          &nbsp;
          <label><input type="radio" name="mode" value="grouped"> Grouped</label>
      </form>
      <svg id="js-stacked-chart-up-rnaseq" class="stacked-chart js-stacked-chart"></svg>
      <div id="js-tooltip-up-rnaseq" class="tooltip js-tooltip">
          <div class="tooltip-wrapper">
              <table class="tooltip-table js-tooltip-table"></table>
          </div>
      </div>
    </div>
    <div style="padding-bottom: 2em;"></div>
    <table id="rnaseq_table_up_1">
    </table>

  </div>

  <div style="padding: 1em;"></div>
  <h3>Down-Regulation</h3>
  <div style="display: flex; width: 100%;">
    <form id="fileform" action="/search/">
      {% csrf_token %}

      <label for="fname2">Mininum Down Regulate Percetage: </label>
      <input type="text" id="fname2" class="hint" name="fname2" value="50"   size="3em"
          onfocus="if (this.className=='hint') { this.className = ''; this.value = '50'; }"
          onblur="if (this.value == '') { this.className = 'hint'; this.value = '50'; }">
      <div style="padding-left: 1em;"></div>
      <label for="fname2_1">Log Fold Change Cutoff: </label>
      <input type="text" id="fname2_1" class="hint" name="fname2_1" value="0.5"  size="3em"
          onfocus="if (this.className=='hint') { this.className = ''; this.value = '0.5'; }"
          onblur="if (this.value == '') { this.className = 'hint'; this.value = '0.5'; }">
      <div style="border-left: 1em;"></div>
      <label for="fname2_2">Adjusted P-Value Cutoff: </label>
      <input type="text" id="fname2_2" class="hint" name="fname2_2" value="0.1"   size="3em"
          onfocus="if (this.className=='hint') { this.className = ''; this.value = '0.1'; }"
          onblur="if (this.value == '') { this.className = 'hint'; this.value = '0.1'; }">
      <div style="border-left: 1em;"></div>
      <div style="display: flex;">
        <input type="submit" id="submit2" value="Search">
        <div id="processtip2" style="margin-left: 10px; margin-top: 7px;"></div>
      </div>
      
   <a id="refresher" href='/tools/'><i class="fas fa-redo-alt ml-1"></i></a> 
    </form>
    
  </div>
  <div style="padding: 1em;"></div>
  
  <div id="post_table_2" style="width: 50em;" class="hidden">
    <div id="num_genes_2" style="padding-bottom: 1em;"></div>

    <div class="stacked-chart-container js-stacked-chart-container-down-micro">
      <form class="controls">
          <label><input type="radio" name="mode" value="stacked" checked> Stacked</label>
          &nbsp;
          <label><input type="radio" name="mode" value="grouped"> Grouped</label>
      </form>
      <svg id="js-stacked-chart-down-micro" class="stacked-chart js-stacked-chart"></svg>
      <div id="js-tooltip-down-micro" class="tooltip js-tooltip">
          <div class="tooltip-wrapper">
              <table class="tooltip-table js-tooltip-table"></table>
          </div>
      </div>
    </div>

    <div style="padding-bottom: 2em;"></div>
    <table id="microarray_table_up_2">
    </table>
    

    <div id="num_genes_2_rna" style="padding-bottom: 1em; padding-top: 3em;"></div>

    <div class="stacked-chart-container js-stacked-chart-container-down-rnaseq">
      <form class="controls">
          <label><input type="radio" name="mode" value="stacked" checked> Stacked</label>
          &nbsp;
          <label><input type="radio" name="mode" value="grouped"> Grouped</label>
      </form>
      <svg id="js-stacked-chart-down-rnaseq" class="stacked-chart js-stacked-chart"></svg>
      <div id="js-tooltip-down-rnaseq" class="tooltip js-tooltip">
          <div class="tooltip-wrapper">
              <table class="tooltip-table js-tooltip-table"></table>
          </div>
      </div>
    </div>

    <div style="padding-bottom: 2em;"></div>
    <table id="rnaseq_table_up_2">
    </table>
  </div> -->
 
</div>




<!-- Upload -->
{% endblock %}

{% block otherJS %}
<!--
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.5.1/min/dropzone.min.css" integrity="sha256-e47xOkXs1JXFbjjpoRr1/LhVcqSzRmGmPqsrUQeVs+g=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.5.1/min/dropzone.min.js" integrity="sha256-cs4thShDfjkqFGk5s2Lxj35sgSRr4MRcyccmi0WKqCM=" crossorigin="anonymous"></script>
-->
<script type="text/x-underscore" class="js-tooltip-table-content">
  <table>
    <caption style="text-align: center; padding-top: 0.5em; padding-bottom: 0.2em; color: black">Gene: <%= title %></caption>
      <% _.each(bars, function (bar) { %>
          <tr class="tool-tips-tr">
              <td class="tool-tips-td"><%= bar.name %></td>
              <td class="tool-tips-td"><%= bar.value %></td>
          </tr>
      <% }); %>
  </table>
  </script>


<script src="https://cdn.jsdelivr.net/npm/chart.js@3.2.1/dist/chart.min.js"></script>
<script src="https://unpkg.com/@sgratzl/chartjs-chart-boxplot@3"></script>

<script src="https://cdn.jsdelivr.net/npm/chartjs-chart-box-and-violin-plot@2.4.0/build/Chart.BoxPlot.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js" integrity="sha384-FZY+KSLVXVyc1qAlqH9oCx1JEOlQh6iXfw3o2n3Iy32qGjXmUPWT9I0Z9e9wxYe3" crossorigin="anonymous"></script>

<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>

<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="{% static 'tools/js/stats.js' %}"></script>
<script src="{% static 'tools/js/meta.js' %}"></script>
<script src="{% static 'tools/js/select.js' %}"></script>
<script src="{% static 'tools/js/drawD3jStackPlot.js' %}"></script>
<script src="{% static 'tools/js/tipso.js' %}"></script>
<script type="text/javascript"> 
  function decodeHtml(html) {
      var txt = document.createElement("textarea");
      txt.innerHTML = html;
      return txt.value;
  }
  var preload = decodeHtml("{{preload}}");

  


</script>
{% endblock %}
